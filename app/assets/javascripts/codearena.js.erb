var CodeArena = [
  '$routeProvider',
  function($routeProvider) {
    $routeProvider
    .when('/', { 
      controller: CurrentChallengeCrtl, 
      templateUrl: '<%= asset_path('current_challenge.html') %>'
    })
    .when('/edit', { 
      controller: EditChallengeCrtl, 
      templateUrl: '<%= asset_path('edit_challenge.html') %>'
    })
    .when('/new', { 
      controller: AddChallengeEntryCrtl, 
      templateUrl: '<%= asset_path('add_challenge_entry.html') %>'
    });
  }
];

var CSRFSetting = [
  '$httpProvider', 
  function(httpProvider) {
    httpProvider.defaults.headers.common['X-CSRF-TOKEN'] = $('meta[name=csrf-token]').attr('content');
  }
]

angular.module('codearena',['entryService']).config(CodeArena)
                                            .config(CSRFSetting);
